!function(){"use strict";class t{constructor(t=3){this.vie=t}loose(){this.vie--,0===this.vie&&alert("GAME OVER")}draw(t){t.font="16px Arial",t.fillStyle="#0095DD",t.fillText(`Lives: ${this.vie}`,t.canvas.width-65,20)}}class i{constructor(){this.score=0}scoreUp(){this.score+=1}draw(t){t.font="16px Arial",t.fillStyle="#0095DD",t.fillText(`Score: ${this.score}`,280,20)}}class s{constructor(t,i,s,h="blue"){this.x=t,this.y=i,this.radius=s<10?10:s,this.color=h,this.dx=2,this.dy=-2}draw(t){t.beginPath(),t.fillStyle=this.color,t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.closePath()}move(t,i,s,h,e){(this.x+this.dx>t.width-this.radius||this.x+this.dx<this.radius)&&(this.dx=-this.dx),this.y+this.dy<this.radius||this.y+this.dy>t.height-this.radius-s.paddleHeight&&this.x>s.paddleX&&this.x<s.paddleX+s.paddleWidth?this.dy=-this.dy:this.y+this.dy>t.height-this.radius&&(i.loose(),i.lives,this.x=t.width/2,this.y=t.height-30,this.dx=2,this.dy=-2,s.paddleX=(t.width-s.paddleWidth)/2);for(let t=0;t<h.rowCount;t++)for(let i=0;i<h.columnCount;i++){let s=h.bricks[t][i];if(1==s.status&&this.x>s.x&&this.x<s.x+s.width&&this.y>s.y&&this.y<s.y+s.height){this.dy=-this.dy;s.recevoirCoup()&&e.scoreUp()}}this.x+=this.dx,this.y+=this.dy}}class h{constructor(t,i=10,s=t.width/15){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.paddleWidth=s<75?75:s,this.paddleHeight=i,this.paddleX=(t.width-s)/2,this.rightPressed=!1,this.leftPressed=!1,this.keyDownHandler=this.keyDownHandler.bind(this),this.keyUpHandler=this.keyUpHandler.bind(this),this.mouseMoveHandler=this.mouseMoveHandler.bind(this),document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler),document.addEventListener("mousemove",this.mouseMoveHandler)}keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)}deplacerLaRaquette(){this.rightPressed?this.paddleX<this.canvas.width-this.paddleWidth&&(this.paddleX+=4):this.leftPressed&&this.paddleX>0&&(this.paddleX-=4)}mouseMoveHandler(t){const i=t.clientX-this.canvas.offsetLeft;i>0&&i<this.canvas.width&&(this.paddleX=i-this.paddleWidth/2)}drawPaddle(){this.ctx.beginPath(),this.ctx.rect(this.paddleX,this.canvas.height-this.paddleHeight,this.paddleWidth,this.paddleHeight),this.ctx.fillStyle="#0095DD",this.ctx.fill(),this.ctx.closePath()}}class e{constructor(t,i,s){this.x=t,this.y=i,this.vx=12*(Math.random()-.5),this.vy=12*(Math.random()-.5),this.color=s,this.life=1,this.decay=.02,this.size=12*Math.random()+12,this.rotation=Math.random()*Math.PI*2,this.rotationSpeed=.2*(Math.random()-.5)}update(){return this.x+=this.vx,this.y+=this.vy,this.vy+=.05,this.life-=this.decay,this.rotation+=this.rotationSpeed,this.life>0}draw(t){t.save(),t.globalAlpha=this.life,t.translate(this.x+this.size/2,this.y+this.size/2),t.rotate(this.rotation),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2,t.fillStyle=this.color,t.fillRect(-this.size/2,-this.size/2,this.size,this.size),t.restore()}}const a=new class{constructor(){this.particles=[]}createExplosion(t,i,s,h=15){for(let a=0;a<h;a++)this.particles.push(new e(t,i,s))}update(){this.particles=this.particles.filter(t=>t.update())}draw(t){this.particles.forEach(i=>i.draw(t))}hasActiveParticles(){return this.particles.length>0}};class d{constructor(t,i,s,h,e="grey",a=1,d=null){this.x=t,this.y=i,this.width=s,this.height=h,this.color=e,this.status=a,this.maxHits=d||this.getMaxHitsByColor(e)}getMaxHitsByColor(t){return"blue"===t.toLowerCase()?2:1}hit(){return this.status<=0||(this.status--,this.status<=0)}draw(t){this.status>0&&(t.beginPath(),t.fillStyle=this.color,t.rect(this.x,this.y,this.width,this.height),t.fill(),t.closePath(),t.globalAlpha=1,this.maxHits>1&&this.status>1&&(t.fillStyle="white",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(this.status.toString(),this.x+this.width/2,this.y+this.height/2)))}recevoirCoup(){return this.status>0&&a.createExplosion(this.x+this.width/2,this.y+this.height/2,this.color,20),this.status=0,!0}}class r extends d{constructor(t,i,s,h,e="blue",a=3){super(t,i,s,h,e),this.vie=a,this.vieMax=a}recevoirCoup(){return this.vie--,this.color=1===this.vie?"red":"orange",this.vie<=0&&(a.createExplosion(this.x+this.width/2,this.y+this.height/2,this.color,20),this.status=0,!0)}}class o{constructor(t,i,s,h,e,a,d){this.columnCount=t,this.rowCount=i,this.width=s,this.height=h,this.padding=e,this.offsetTop=a,this.canvas=d,this.bricks=[],this.initializeBricks()}resize(t,i){this.width=t,this.height=i;const s=this.columnCount*this.width+(this.columnCount-1)*this.padding,h=(this.canvas.width-s)/2;for(let t=0;t<this.rowCount;t++)for(let i=0;i<this.columnCount;i++){const s=this.bricks[t][i];s&&(s.width=this.width,s.height=this.height,s.x=h+i*(this.width+this.padding),s.y=this.offsetTop+t*(this.height+this.padding))}}initializeBricks(){const t=this.columnCount*this.width+(this.columnCount-1)*this.padding,i=(this.canvas.width-t)/2;for(let t=0;t<this.rowCount;t++){this.bricks[t]=[];for(let s=0;s<this.columnCount;s++){const h=i+s*(this.width+this.padding),e=this.offsetTop+t*(this.height+this.padding);let a;a=Math.random()<.2?new r(h,e,this.width,this.height,"blue"):new d(h,e,this.width,this.height,"grey"),this.bricks[t][s]=a}}}getBricks(){return this.bricks}draw(t){this.bricks.forEach(i=>{i.forEach(i=>{0!==i.status&&i.draw(t)})})}}const l=document.getElementById("canvaGame"),n=l.getContext("2d");l.width=window.innerWidth,l.height=window.innerHeight-100;const c=new class{constructor(e,a){e.width,e.width,e.height,this.score=new i,this.vie=new t,this.ballList=[],this.ballList.push(new s(300,300,e.width/70)),this.canvas=e,this.barre=new h(e),this.grid=new o(10,6,this.canvas.width/11,this.canvas.width/50,10,30,this.canvas),window.addEventListener("resize",()=>this.handleResize(10,6))}handleResize(t,i){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight-100;const s=(this.canvas.width-100)/t,h=.5*this.canvas.height/i;this.grid.resize(s,h),this.barre.paddleX>this.canvas.width-this.barre.paddleWidth&&(this.barre.paddleX=this.canvas.width-this.barre.paddleWidth)}draw(){let t=this.canvas.getContext("2d");this.ballList[0].move(this.canvas,this.vie,this.barre,this.grid,this.score),a.update(),this.ballList[0].draw(t),this.grid.draw(t),a.draw(t),this.vie.draw(t),this.score.draw(t),this.barre.drawPaddle(),this.barre.deplacerLaRaquette()}}(l,3);!function t(){n.clearRect(0,0,l.width,l.height),c.draw(),requestAnimationFrame(t)}()}();
//# sourceMappingURL=bundle.min.js.map
